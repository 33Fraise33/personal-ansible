http:
  services:
    jackett:
      loadBalancer:
        servers:
          - url: "http://{{ docker_network.ipv4_prefix }}{{ docker_network.hosts.jackett }}:9117"
          - url: "http://{{ docker_network.ipv6_prefix }}{{ docker_network.hosts.jackett }}:9117"
    deluge:
      loadBalancer:
        servers:
          - url: "http://{{ docker_network.ipv4_prefix }}{{ docker_network.hosts.deluge }}:8112"
    plex:
      loadBalancer:
        servers:
          - url: "http://{{ docker_network.ipv4_prefix }}{{ docker_network.hosts.plex }}:32400"
    radarr:
      loadBalancer:
        servers:
          - url: "http://{{ docker_network.ipv4_prefix }}{{ docker_network.hosts.radarr }}:7878"
          - url: "http://{{ docker_network.ipv6_prefix }}{{ docker_network.hosts.radarr }}:7878"
    calibre:
      loadBalancer:
        servers:
          - url: "http://{{ docker_network.ipv4_prefix }}{{ docker_network.hosts.calibre }}:8080"
          - url: "http://{{ docker_network.ipv6_prefix }}{{ docker_network.hosts.calibre }}:8080"
    calibre-web:
      loadBalancer:
        servers:
          - url: "http://{{ docker_network.ipv4_prefix }}{{ docker_network.hosts.calibre_web }}:8083"
          - url: "http://{{ docker_network.ipv6_prefix }}{{ docker_network.hosts.calibre_web }}:8083"
    ironman:
      loadBalancer:
        servers:
          - url: "https://10.33.0.1:8443"
          - url: "https://[2a12:4946:4000::1]:8443"
    status:
      loadBalancer:
        servers:
          - url: "https://33fraise33.github.io"
    googlehosted:
      loadBalancer:
        servers:
          - url: "https://ghs.googlehosted.com"
  routers:
    jackett:
      rule: "Host(`jackett.frai.se`)"
      service: "jackett"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
    deluge:
      rule: "Host(`deluge.frai.se`)"
      service: "deluge"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
    plex:
      rule: "Host(`plex.frai.se`)"
      service: "plex"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
    radarr:
      rule: "Host(`radarr.frai.se`)"
      service: "radarr"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
    calibre:
      rule: "Host(`calibre.frai.se`)"
      service: "calibre"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
    calibre-web:
      rule: "Host(`books.frai.se`)"
      service: "calibre-web"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
    ironman:
      rule: "Host(`ironman.frai.se`)"
      service: "ironman"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
    status:
      rule: "Host(`status.frai.se`)"
      service: "status"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
    calendar:
      rule: "Host(`calendar.frai.se`)"
      service: "googlehosted"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
    mail:
      rule: "Host(`mail.frai.se`)"
      service: "googlehosted"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
    drive:
      rule: "Host(`drive.frai.se`)"
      service: "googlehosted"
      tls:
        certResolver: le
        domains:
          - main: "*.frai.se"
  middlewares:
    mywhitelist:
      ipWhiteList:
        sourceRange:
          # rfc1918
          - 10.0.0.0/8
          - 172.16.0.0/12
          - 192.168.0.0/16
          # cloudflare https://www.cloudflare.com/ips/
          - 173.245.48.0/20
          - 103.21.244.0/22
          - 103.22.200.0/22
          - 103.31.4.0/22
          - 141.101.64.0/18
          - 108.162.192.0/18
          - 190.93.240.0/20
          - 188.114.96.0/20
          - 197.234.240.0/22
          - 198.41.128.0/17
          - 162.158.0.0/15
          - 104.16.0.0/13
          - 104.24.0.0/14
          - 172.64.0.0/13
          - 131.0.72.0/22
